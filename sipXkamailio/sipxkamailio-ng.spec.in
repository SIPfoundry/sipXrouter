#!BuildIgnore: post-build-checks

%if 0%{?fedora} >= 16
%define build_turn 1
%else
%define build_turn 0
%endif

Name: @PACKAGE@
Version: @VERSION@
Release: @PACKAGE_REVISION@

Summary: sipX plugins for Kamailio
License: LGPL
Group: Development/Libraries
Vendor: SIPFoundry
Url: http://www.sipfoundry.org

Obsoletes: @PACKAGE_OBSOLETE_NAME@
BuildRequires: automake
BuildRequires: libtool
BuildRequires: gcc-c++
BuildRequires: oss_core-devel
Requires: oss_core
BuildRequires: pcre-devel
BuildRequires: findutils
Requires: openssl >= 0.9.7a
Requires: pcre >= 4.5

BuildRequires: boost-devel
Requires: boost

BuildRequires: libevent2-devel
Requires: libevent2

BuildRequires: gtest-devel
Requires: gtest

Source: %name-%version.tar.gz

Prefix: %_prefix
BuildRoot: %{_tmppath}/%name-%version-root

%description
sipX plugins for Kamailio

%if %{_vendor} == suse
%debug_package
%endif

%prep
%setup -q

%build
%configure @SIPX_RPM_CONFIGURE_OPTIONS@
cp config.log %name.configlog
make %{_smp_mflags} all

%install
rm -rf $RPM_BUILD_ROOT
make DESTDIR=$RPM_BUILD_ROOT install

%clean
rm -rf $RPM_BUILD_ROOT

%files
%defattr(644,root,root,755)
%doc  LICENSE README   ChangeLog %name.configlog
%attr(755,root,root) %{_libdir}/libdialogEventCollator.so*
%attr(755,root,root) %{_libdir}/libRedisMessageQueue.so*
%exclude %{_includedir}/DialogEventCollator
%exclude %{_includedir}/MessageQueue
%exclude %{_includedir}/xmlparser
%exclude %{_libdir}/libdialogEventCollator.la
%exclude %{_libdir}/libRedisMessageQueue.la
%exclude %{_bindir}/dialog_event_collator_unit_test
%exclude %{_bindir}/redis_subscribe_queue_unit_test

%changelog

